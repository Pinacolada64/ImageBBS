' 4/Jun/2016 11:14' i am assuming this is a header prg which displays saved chats' for pass=1 to 3:org $0801,-(pass=3),8,"@:chatmode"' print pass;{asm}bnkout=$fc4ebankin=$fc71;clrhdr=$806cfnfile=$804balcont=$807bmnsext=$809coutput=$8048;catlog=$24cntfil=5;hdrblk=$91e0filnam=hdrblk+$00 ; 16 + ","filtyp=hdrblk+$18nbinfl=hdrblk+$10blmilo=hdrblk+$20;size=16; this wrote a line of BASIC:; send "1990 sys"+mid$(str$(ml),2)+" new image"; unsend;ml: jsr bnkoutjsr clrhdrldy #7loop: lda name,y:sta filnam,ydey:bpl loopjsr fnfile:bcc foundsta idxoffstx idxblk:sty idxblk+1lda #cntfil:sta filtyplda #>size:sta nbinfllda #<size:sta nbinfl+1jsr alcont:bcs noroomlda idxoff:phaldx idxblk:ldy idxblk+1lda #catlog:jsr mnsextldx #<msg1:ldy #>msg1jsr outputfound: ldx #<msg2:ldy #>msg2jsr output:jsr chatmodedone: jsr bankin:jmp $a8f8;noroom: ldx #<msg3:ldy #>msg3jsr output:jmp done;msg1: byte "ChatFile Created",13,0msg2: byte "Chat íode:",13,0msg3: byte "No Room",13,0;idxoff: byte 0idxblk: word 0;name: byte "chatfile";chatmode:lda blmilo+0:sta blknum+0lda blmilo+1:sta blknum+1chat0: lda 198:beq chat1rtschat1:;blokbuf: dup 0,512;next pass:close 8
ready.
